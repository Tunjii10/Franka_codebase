# Automation
This project involves the creation and simulation of a control program for a pick and place operation using franka emika panda. The control program is exposed as a ROS service server callable from a ROS service client. 

<br>

![sample-video](ezgif.com-video-to-gif.gif)


## Use Case
The program is written for picking up petri Dish stacks from a box and placing in an enclosure.


## Environment
This project was done using ROS noetic,python and C++. Other tools used include Moveit Noetic and Franka ROS.


## Installation Guide
To install this package clone the repository into a catkin workspace and build the package from a catkin source directory.
<br/>

**Note:** 
The franka _ros, libfranka and moveit packages (panda_config) used in this project were built from source. The various source links for these packages are provided in the references section.<br>
In case of error related to franka_ros while building the catkin packages use this command with directions to the libfranka install <br>

```catkin_make -DCMAKE_BUILD_TYPE=Release -DFranka_DIR:PATH=~<libfranka path>```
## Steps for testing program

**To run the program follow these steps.**
<br/>

**1.** To run gazebo and rviz environment. 
```
roslaunch automation gazebo.launch
```
For proper visualization in Rviz change the Global Options->Fixed frame to world

**2.** To run the service server
```
rosrun automation move_pose_server
```

**3.** To run the service client
```
rosrun automation srv_client.py
```
**Note:** Each command needs to be run in the ordered steps and the node has to be completely loaded before running the next step



## References

Reference materials are enumerated below;

*gazebo.launch* file - Reference available at https://github.com/ros-planning/panda_moveit_config/blob/noetic-devel/launch/demo_gazebo.launch

*move_pose_server.cpp* file- Reference available at https://github.com/ros-planning/moveit_tutorials/blob/master/doc/pick_place/src/pick_place_tutorial.cpp

**Built from source libraries**
<br>
*WS_moveit* - This package was built from source and cloned from the ros-planning github repo . <br/>
Available at https://raw.githubusercontent.com/ros-planning/moveit/master/moveit.rosinstall, https://github.com/ros-planning/panda_moveit_config.git
<br/>
Installation guides can be found at https://ros-planning.github.io/moveit_tutorials/doc/getting_started/getting_started.html

*franka_ros* - This package was built from source and cloned from the franka emika panda github repo. Available at https://github.com/frankaemika/franka_ros <br/>
Installation guides can be found at https://frankaemika.github.io/docs/installation_linux.html

*libfranka* - This package was built from source and cloned form the franka emika panda github repo. Available at https://github.com/frankaemika/libfranka
<br/>
Installation guides can be found at https://frankaemika.github.io/docs/installation_linux.html

*automation_copy.sdf* was autogenerated using gazebo gui.

## Directories
**Note:** The libfranka directory was not installed within the Catkin_ws in the rosject. The models directory contains all the custom mesh and config files transferreed to the ``.gazebo/models`` directory. 

## Gazebo World
Due to the errors involved with grasping the object in gazebo, the program line (line 15) for launching the robot in the custom world has been commented out making the launch file display the panda robot in an empty world on launch.